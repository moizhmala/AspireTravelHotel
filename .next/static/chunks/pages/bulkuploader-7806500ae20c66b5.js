(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[962],{498:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(1713).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1564:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var s=t(7876),r=t(4232),l=t(6257),n=t(6739),i=t(498),d=t(9099),o=t(6642);function c(){let e=(0,d.useRouter)(),[a,t]=(0,r.useState)("picklist"),[c,p]=(0,r.useState)("dev"),[u,h]=(0,r.useState)(null),[m,x]=(0,r.useState)(!1),[g,y]=(0,r.useState)(null),[v,b]=(0,r.useState)(null),[j,f]=(0,r.useState)([]),[w,N]=(0,r.useState)([]),[k,C]=(0,r.useState)(""),[S,E]=(0,r.useState)(""),[A,_]=(0,r.useState)(!0),[L,P]=(0,r.useState)(!0),[U,T]=(0,r.useState)("");(0,r.useEffect)(()=>{p("/prod"===e.asPath?"prod":"dev")},[e.asPath]),(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/types"),a=await e.json();f(a.types||[])}finally{_(!1)}})()},[]),(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/languages"),a=await e.json();N(a.languages||[])}finally{P(!1)}})()},[]),(0,r.useEffect)(()=>{h(null),y(null),b(null)},[a]);let F=e=>{var a;(null==(a=e.target.files)?void 0:a[0])&&(h(e.target.files[0]),y(null))},O=async()=>{if(!u||!k||!S)return void y("All fields are required.");let e=new FormData;e.append("file",u),e.append("environment",c),e.append("type",k),e.append("language",S),x(!0);try{let a=await fetch("/api/uploadpicklist",{method:"POST",body:e}),t=await a.json();a.ok?b(t):y(t.message)}finally{x(!1)}},R=async()=>{if(!u||!U)return void y("File and type are required.");let e=new FormData;e.append("file",u),e.append("environment",c),e.append("type",U),x(!0);try{let a=await fetch("/api/uploadheaderfooter",{method:"POST",body:e}),t=await a.json();a.ok?b(t):y(t.message)}finally{x(!1)}},q=()=>(0,s.jsxs)("label",{className:"border-2 border-dashed rounded-lg p-8 flex flex-col items-center cursor-pointer",children:[(0,s.jsx)(l.A,{size:32}),(0,s.jsx)("span",{className:"mt-2 text-sm",children:u?u.name:"Upload CSV"}),(0,s.jsx)("input",{type:"file",accept:".csv",hidden:!0,onChange:F})]}),z=()=>(0,s.jsxs)("select",{value:c,onChange:e=>p(e.target.value),className:"border p-2 rounded bg-gray-500",children:[(0,s.jsx)("option",{value:"dev",children:"Development"}),(0,s.jsx)("option",{value:"prod",children:"Production"})]});return(0,s.jsxs)("div",{className:"p-6 max-w-5xl mx-auto rounded-xl shadow",children:[(0,s.jsx)("div",{className:"flex border-b mb-6 bg-white rounded",children:[["picklist","Picklist Upload"],["headerFooter","Header / Footer Upload"],["export","Export"]].map(e=>{let[r,l]=e;return(0,s.jsx)("button",{onClick:()=>t(r),className:"px-4 py-2 border-b-2 ".concat(a===r?"border-blue-600 text-blue-600":"border-transparent text-gray-500"),children:l},r)})}),"picklist"===a&&(0,s.jsxs)("div",{className:"space-y-6 bg-gray-500 rounded p-4",children:[(0,s.jsx)(q,{}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,s.jsx)(z,{}),(0,s.jsxs)("select",{value:k,onChange:e=>C(e.target.value),className:"border p-2 rounded bg-gray-500",disabled:A,children:[(0,s.jsx)("option",{value:"",children:"File Type"}),j.map(e=>(0,s.jsx)("option",{value:e.codename,children:e.name},e.codename))]}),(0,s.jsxs)("select",{value:S,onChange:e=>E(e.target.value),className:"border p-2 rounded bg-gray-500",disabled:L,children:[(0,s.jsx)("option",{value:"",children:"Language"}),w.map(e=>(0,s.jsx)("option",{value:e.codename,children:e.name},e.codename))]})]}),(0,s.jsx)("button",{onClick:O,disabled:m,className:"bg-orange-500 text-white px-4 py-2 rounded",children:"Upload Picklist"})]}),"headerFooter"===a&&(0,s.jsxs)("div",{className:"space-y-6 bg-gray-500 rounded p-4",children:[(0,s.jsx)(q,{}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsx)(z,{}),(0,s.jsxs)("select",{value:U,onChange:e=>T(e.target.value),className:"border p-2 rounded bg-gray-500",children:[(0,s.jsx)("option",{value:"",children:"Type"}),(0,s.jsx)("option",{value:"email",children:"Email"}),(0,s.jsx)("option",{value:"web",children:"Web"})]})]}),(0,s.jsx)("button",{onClick:R,className:"bg-orange-500 text-white px-4 py-2 rounded",children:"Upload Header / Footer"})]}),"export"===a&&(0,s.jsxs)("div",{className:"space-y-6 bg-gray-500 rounded p-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsx)(z,{}),(0,s.jsxs)("select",{value:k,onChange:e=>C(e.target.value),className:"border p-2 rounded bg-gray-500",children:[(0,s.jsx)("option",{value:"",children:"File Type"}),j.map(e=>(0,s.jsx)("option",{value:e.codename,children:e.name},e.codename))]})]}),(0,s.jsx)(o.N,{environment:c,systemType:k,disabled:!k})]}),g&&(0,s.jsxs)("div",{className:"mt-4 flex items-center text-red-600",children:[(0,s.jsx)(n.A,{size:18,className:"mr-2"})," ",g]}),v&&(0,s.jsxs)("div",{className:"mt-6 text-green-700",children:[(0,s.jsx)(i.A,{className:"inline mr-2"}),v.message]})]})}},1713:(e,a,t)=>{"use strict";t.d(a,{A:()=>c});var s=t(4232);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase()),n=e=>{let a=l(e);return a.charAt(0).toUpperCase()+a.slice(1)},i=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim()};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)((e,a)=>{let{color:t="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:n,className:o="",children:c,iconNode:p,...u}=e;return(0,s.createElement)("svg",{ref:a,...d,width:r,height:r,stroke:t,strokeWidth:n?24*Number(l)/Number(r):l,className:i("lucide",o),...u},[...p.map(e=>{let[a,t]=e;return(0,s.createElement)(a,t)}),...Array.isArray(c)?c:[c]])}),c=(e,a)=>{let t=(0,s.forwardRef)((t,l)=>{let{className:d,...c}=t;return(0,s.createElement)(o,{ref:l,iconNode:a,className:i("lucide-".concat(r(n(e))),"lucide-".concat(e),d),...c})});return t.displayName=n(e),t}},6257:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(1713).A)("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},6642:(e,a,t)=>{"use strict";t.d(a,{N:()=>l});var s=t(7876),r=t(4232);let l=e=>{let{environment:a,systemType:t,disabled:l}=e,[n,i]=(0,r.useState)(0),[d,o]=(0,r.useState)(!1),c=()=>{let e=setInterval(async()=>{let a=await fetch("/api/exportProgress",{cache:"no-store"}),t=await a.json();i(t.progress),t.progress>=100&&(clearInterval(e),o(!1))},1e3)},p=async()=>{if(!a||!t)return void alert("Please select Environment and List");i(0),o(!0),c();let e=await fetch("/api/exportCSVList",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({environment:a,queryParams:{"system.type":t}})});if(!e.ok){o(!1),alert("Export failed");return}let s=await e.blob(),r=window.URL.createObjectURL(s),l=document.createElement("a");l.href=r,l.download="Monarch_".concat(a,"_").concat(t,".csv"),document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(r)};return(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("button",{onClick:p,disabled:l||d,className:"bg-blue-500 text-white px-4 py-2 rounded disabled:opacity-50",children:d?"Exporting...":"Export List"}),d&&(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded h-2",children:(0,s.jsx)("div",{className:"bg-blue-600 h-2 rounded transition-all",style:{width:"".concat(n,"%")}})}),d&&(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:[n,"%"]})]})}},6739:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(1713).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},8844:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/bulkuploader",function(){return t(1564)}])},9099:(e,a,t)=>{e.exports=t(8253)}},e=>{var a=a=>e(e.s=a);e.O(0,[636,593,792],()=>a(8844)),_N_E=e.O()}]);