module.exports=[2734,(a,b,c)=>{b.exports=a.x("fs",()=>require("fs"))},8947,(a,b,c)=>{b.exports=a.x("stream",()=>require("stream"))},4016,a=>{"use strict";var b=a.i(8171),c=a.i(7669),d=a.i(7140),e=a.i(5290),f=a.i(8851),g=a.i(2620),h=a.i(1018);function i(){let[a,i]=(0,c.useState)(null),[j,k]=(0,c.useState)("dev"),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)("default"),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(!0),[B,C]=(0,c.useState)(!0),D=(0,g.useRouter)();(0,c.useEffect)(()=>{"/prod"===D.asPath?k("prod"):k("dev")},[D.asPath]),(0,c.useEffect)(()=>{(async()=>{A(!0);try{let a=await fetch("/api/types");if(!a.ok)throw Error("Failed to fetch types");let b=await a.json();m(b.types||[])}catch(a){console.error("Error fetching types:",a),y("Failed to load file types. Please refresh the page.")}finally{A(!1)}})()},[]),(0,c.useEffect)(()=>{(async()=>{C(!0);try{let a=await fetch("/api/languages");if(!a.ok)throw Error("Failed to fetch languages");let b=await a.json();q(b.languages||[])}catch(a){console.error("Error fetching languages:",a),y("Failed to load languages. Please refresh the page.")}finally{C(!1)}})()},[]);let E=async()=>{if(w(null),y(null),!(()=>{if(!a)return y("Please select a file."),!1;if(!n)return y("Please select a type."),!1;if(!r)return y("Please select a language."),!1;let b=l.find(a=>a.codename===n);return b?p.find(a=>a.codename===r)?a.name===`${b.codename}.csv`||(y(`Filename must be "${b.codename}.csv".`),!1):(y("Invalid language selected."),!1):(y("Invalid type selected."),!1)})())return;let b=new FormData;b.append("file",a),b.append("environment",j),b.append("type",n),u(!0);try{let a=await fetch("/api/upload",{method:"POST",body:b}),c=await a.json();a.ok?w(c):y(c.message||"Error uploading file.")}catch(a){console.error("Error uploading file",a),y("Error uploading file. Please try again.")}finally{u(!1)}},F=()=>{i(null),o(""),w(null),y(null);let a=document.getElementById("fileInput");a&&(a.value="")};return(0,b.jsxs)("div",{className:"p-6 max-w-4xl mx-auto bg-white rounded-xl shadow-md",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-6 text-black",children:"PickList Bulk Uploader"}),(0,b.jsx)("p",{className:"text-gray-700 mb-4",children:"Upload a CSV file to bulk import items into your PickList. Ensure the file is named correctly based on the selected type."}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mb-6",children:["Download Template for Â ",(0,b.jsx)("span",{className:"font-semibold",children:"dev"===j?"Development":"Production"}),":",(0,b.jsx)("a",{href:"/api/getSampleTemplate",target:"_blank",rel:"noopener noreferrer",download:!0,"aria-label":"Download sample template",className:"button bg-green-600 hover:bg-green-500 px-4 py-2 rounded text-white  ml-1",children:"Sample Template"})]}),!v&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"flex justify-between items-center",children:(0,b.jsx)("label",{className:"block text-sm font-medium text-black",htmlFor:"fileInput",children:"Upload CSV File"})}),(0,b.jsxs)("label",{htmlFor:"fileInput",className:`border-2 border-dashed rounded-lg p-8 flex flex-col items-center justify-center cursor-pointer transition-colors ${a?"border-green-300 bg-green-50":"border-gray-300 hover:border-blue-400 hover:bg-blue-50"}`,children:[(0,b.jsx)(f.Upload,{className:a?"text-green-500":"text-gray-400",size:32}),(0,b.jsx)("span",{className:"mt-2 text-sm text-gray-600",children:a?a.name:"Click to select a CSV file or drag and drop"}),(0,b.jsx)("input",{id:"fileInput",type:"file",accept:".csv",onChange:a=>{a.target.files&&a.target.files.length>0&&(i(a.target.files[0]),y(null))},className:"hidden",disabled:t})]})]}),(0,b.jsxs)("div",{className:"columns-3 gap-4",children:[(0,b.jsxs)("div",{className:"relative ",children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1 text-black",htmlFor:"environmentSelect",children:"Environment"}),(0,b.jsxs)("select",{id:"environmentSelect",value:j,onChange:a=>k(a.target.value),className:"block w-full bg-white appearance-none border border-gray-300 text-black p-2 rounded leading-tight focus:outline-none focus:border-blue-500",disabled:t,children:[(0,b.jsx)("option",{value:"dev",children:"Development"}),(0,b.jsx)("option",{value:"prod",children:"Production"})]}),(0,b.jsx)("div",{className:"pointer-events-none absolute top-8 right-0 flex items-center px-2 text-gray-700",children:(0,b.jsx)("svg",{className:"h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),(0,b.jsxs)("div",{className:"relative ",children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1 text-black",htmlFor:"typeSelect",children:"File Type"}),(0,b.jsxs)("select",{id:"typeSelect",value:n,onChange:a=>o(a.target.value),className:"block w-full bg-white appearance-none border border-gray-300 text-black p-2 rounded leading-tight focus:outline-none focus:border-blue-500",disabled:z||0===l.length||t,children:[(0,b.jsx)("option",{value:"",children:"Select a type"}),l.map(a=>(0,b.jsx)("option",{value:a.codename,children:a.name},a.codename))]}),(0,b.jsx)("div",{className:"pointer-events-none absolute top-8 right-0 flex items-center px-2 text-gray-700",children:(0,b.jsx)("svg",{className:"h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})}),z&&(0,b.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Loading types..."}),!z&&0===l.length&&(0,b.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"No file types available"})]}),(0,b.jsxs)("div",{className:"relative ",children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1 text-black",htmlFor:"languageSelect",children:"Languages"}),(0,b.jsx)("select",{id:"languageSelect",value:r,onChange:a=>s(a.target.value),className:"block w-full bg-white appearance-none border border-gray-300 text-black p-2 rounded leading-tight focus:outline-none focus:border-blue-500",children:p.map(a=>(0,b.jsx)("option",{value:a.codename,children:a.name},a.codename))}),(0,b.jsx)("div",{className:"pointer-events-none absolute top-8 right-0 flex items-center px-2 text-gray-700",children:(0,b.jsx)("svg",{className:"h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})}),B&&(0,b.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Loading languages..."}),!B&&0===p.length&&(0,b.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"No language available"})]})]}),x&&(0,b.jsxs)("div",{className:"flex items-center p-3 bg-red-50 border border-red-200 rounded text-red-800",role:"alert",children:[(0,b.jsx)(d.AlertCircle,{size:20,className:"text-red-500 mr-2"}),(0,b.jsx)("p",{className:"text-sm",children:x})]}),(0,b.jsxs)("div",{className:"flex space-x-3",children:[(0,b.jsx)("button",{onClick:E,className:"px-4 py-2 bg-orange-500 text-white rounded transition-colors hover:bg-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",disabled:t||!a||!n,type:"button",children:t?"Uploading...":"Upload File"}),(0,b.jsx)(h.ExportButton,{environment:j,systemType:n,disabled:!j||!n}),(0,b.jsx)("button",{onClick:F,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded hover:bg-gray-50",disabled:t,type:"button",children:"Reset"})]})]}),v&&(0,b.jsxs)("div",{className:"mt-8 border-t pt-6",children:[(0,b.jsxs)("div",{className:"flex items-center mb-4",children:[(0,b.jsx)(e.CheckCircle,{size:24,className:"text-green-500 mr-2"}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-black",children:"Upload Complete"})]}),(0,b.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded mb-4 text-black",children:[(0,b.jsx)("p",{children:v.message}),(0,b.jsxs)("div",{className:"flex space-x-8 mt-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Processed:"}),(0,b.jsxs)("span",{className:`ml-2 font-semibold ${v.processedCount<=0?"text-orange-600":"text-green-600"}`,children:[v.processedCount," records"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Unprocessed:"}),(0,b.jsxs)("span",{className:`ml-2 font-semibold ${v.unprocessedCount>0?"text-orange-600":"text-green-600"}`,children:[v.unprocessedCount," records"]})]})]})]}),v.unprocessedCount>0&&v.unprocessedRecords&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium mb-2",children:"Unprocessed Records:"}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full border border-gray-200 rounded",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Name"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Reason"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:v.unprocessedRecords.map((a,c)=>(0,b.jsxs)("tr",{className:"bg-white",children:[(0,b.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:a.name}),(0,b.jsx)("td",{className:"px-4 py-2 text-sm text-red-600",children:a.reason})]},c))})]})})]}),(0,b.jsx)("div",{className:"flex justify-between mt-6",children:(0,b.jsx)("button",{onClick:F,className:"px-4 py-2 bg-blue-50 text-blue-600 border border-blue-200 rounded hover:bg-blue-100 transition-colors",type:"button",children:"Upload Another File"})})]})]})}a.s(["default",()=>i])},6319,a=>{"use strict";var b=a.i(8324),c=a.i(9845),d=a.i(8449),e=a.i(1837),f=a.i(5405),g=a.i(8171),h=a.i(4016);function i(){return(0,g.jsx)(h.default,{})}a.s(["default",()=>i],8538);var j=a.i(8538),k=a.i(721);let l=(0,d.hoist)(j,"default"),m=(0,d.hoist)(j,"getStaticProps"),n=(0,d.hoist)(j,"getStaticPaths"),o=(0,d.hoist)(j,"getServerSideProps"),p=(0,d.hoist)(j,"config"),q=(0,d.hoist)(j,"reportWebVitals"),r=(0,d.hoist)(j,"unstable_getStaticProps"),s=(0,d.hoist)(j,"unstable_getStaticPaths"),t=(0,d.hoist)(j,"unstable_getStaticParams"),u=(0,d.hoist)(j,"unstable_getServerProps"),v=(0,d.hoist)(j,"unstable_getServerSideProps"),w=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/[env]",pathname:"/[env]",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:j}),x=(0,k.getHandler)({srcPage:"/[env]",config:p,userland:j,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r],6319)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e222d462._.js.map