exports.id=661,exports.ids=[661],exports.modules={403:(e,t,s)=>{"use strict";s.d(t,{N:()=>r});var l=s(8732),a=s(2015);let r=({environment:e,systemType:t,disabled:s})=>{let[r,n]=(0,a.useState)(0),[d,i]=(0,a.useState)(!1),o=()=>{let e=setInterval(async()=>{let t=await fetch("/api/exportProgress",{cache:"no-store"}),s=await t.json();n(s.progress),s.progress>=100&&(clearInterval(e),i(!1))},1e3)},c=async()=>{if(!e||!t)return void alert("Please select Environment and List");n(0),i(!0),o();let s=await fetch("/api/exportCSVList",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({environment:e,queryParams:{"system.type":t}})});if(!s.ok){i(!1),alert("Export failed");return}let l=await s.blob(),a=window.URL.createObjectURL(l),r=document.createElement("a");r.href=a,r.download=`Monarch_${e}_${t}.csv`,document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(a)};return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("button",{onClick:c,disabled:s||d,className:"bg-blue-500 text-white px-4 py-2 rounded disabled:opacity-50",children:d?"Exporting...":"Export List"}),d&&(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded h-2",children:(0,l.jsx)("div",{className:"bg-blue-600 h-2 rounded transition-all",style:{width:`${r}%`}})}),d&&(0,l.jsxs)("span",{className:"text-sm text-gray-600",children:[r,"%"]})]})}},979:()=>{},1779:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var l=s(8732),a=s(2341);function r(){return(0,l.jsxs)(a.Html,{lang:"en",children:[(0,l.jsx)(a.Head,{}),(0,l.jsxs)("body",{className:"antialiased",children:[(0,l.jsx)(a.Main,{}),(0,l.jsx)(a.NextScript,{})]})]})}},2081:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var l=s(8732);function a({Component:e,pageProps:t}){return(0,l.jsx)(e,{...t})}s(979)},2711:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var l=s(8732),a=s(2015),r=s(1536),n=s(5134),d=s(3213),i=s(4233),o=s(403);function c(){let[e,t]=(0,a.useState)(null),[s,c]=(0,a.useState)("dev"),[x,m]=(0,a.useState)([]),[u,p]=(0,a.useState)(""),[h,b]=(0,a.useState)([]),[g,v]=(0,a.useState)("default"),[j,f]=(0,a.useState)(!1),[y,N]=(0,a.useState)(null),[w,k]=(0,a.useState)(null),[S,C]=(0,a.useState)(!0),[R,L]=(0,a.useState)(!0);(0,i.useRouter)();let P=()=>{if(!e)return k("Please select a file."),!1;if(!u)return k("Please select a type."),!1;if(!g)return k("Please select a language."),!1;let t=x.find(e=>e.codename===u);return t?h.find(e=>e.codename===g)?e.name===`${t.codename}.csv`||(k(`Filename must be "${t.codename}.csv".`),!1):(k("Invalid language selected."),!1):(k("Invalid type selected."),!1)},U=async()=>{if(N(null),k(null),!P())return;let t=new FormData;t.append("file",e),t.append("environment",s),t.append("type",u),f(!0);try{let e=await fetch("/api/upload",{method:"POST",body:t}),s=await e.json();e.ok?N(s):k(s.message||"Error uploading file.")}catch(e){console.error("Error uploading file",e),k("Error uploading file. Please try again.")}finally{f(!1)}},E=()=>{t(null),p(""),N(null),k(null);let e=document.getElementById("fileInput");e&&(e.value="")};return(0,l.jsxs)("div",{className:"p-6 max-w-4xl mx-auto bg-white rounded-xl shadow-md",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-6 text-black",children:"PickList Bulk Uploader"}),(0,l.jsx)("p",{className:"text-gray-700 mb-4",children:"Upload a CSV file to bulk import items into your PickList. Ensure the file is named correctly based on the selected type."}),(0,l.jsxs)("p",{className:"text-sm text-gray-500 mb-6",children:["Download Template for \xa0",(0,l.jsx)("span",{className:"font-semibold",children:"dev"===s?"Development":"Production"}),":",(0,l.jsx)("a",{href:"/api/getSampleTemplate",target:"_blank",rel:"noopener noreferrer",download:!0,"aria-label":"Download sample template",className:"button bg-green-600 hover:bg-green-500 px-4 py-2 rounded text-white  ml-1",children:"Sample Template"})]}),!y&&(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("div",{className:"flex justify-between items-center",children:(0,l.jsx)("label",{className:"block text-sm font-medium text-black",htmlFor:"fileInput",children:"Upload CSV File"})}),(0,l.jsxs)("label",{htmlFor:"fileInput",className:`border-2 border-dashed rounded-lg p-8 flex flex-col items-center justify-center cursor-pointer transition-colors ${e?"border-green-300 bg-green-50":"border-gray-300 hover:border-blue-400 hover:bg-blue-50"}`,children:[(0,l.jsx)(r.A,{className:e?"text-green-500":"text-gray-400",size:32}),(0,l.jsx)("span",{className:"mt-2 text-sm text-gray-600",children:e?e.name:"Click to select a CSV file or drag and drop"}),(0,l.jsx)("input",{id:"fileInput",type:"file",accept:".csv",onChange:e=>{e.target.files&&e.target.files.length>0&&(t(e.target.files[0]),k(null))},className:"hidden",disabled:j})]})]}),(0,l.jsxs)("div",{className:"columns-3 gap-4",children:[(0,l.jsxs)("div",{className:"relative ",children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1 text-black",htmlFor:"environmentSelect",children:"Environment"}),(0,l.jsxs)("select",{id:"environmentSelect",value:s,onChange:e=>c(e.target.value),className:"block w-full bg-white appearance-none border border-gray-300 text-black p-2 rounded leading-tight focus:outline-none focus:border-blue-500",disabled:j,children:[(0,l.jsx)("option",{value:"dev",children:"Development"}),(0,l.jsx)("option",{value:"prod",children:"Production"})]}),(0,l.jsx)("div",{className:"pointer-events-none absolute top-8 right-0 flex items-center px-2 text-gray-700",children:(0,l.jsx)("svg",{className:"h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),(0,l.jsxs)("div",{className:"relative ",children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1 text-black",htmlFor:"typeSelect",children:"File Type"}),(0,l.jsxs)("select",{id:"typeSelect",value:u,onChange:e=>p(e.target.value),className:"block w-full bg-white appearance-none border border-gray-300 text-black p-2 rounded leading-tight focus:outline-none focus:border-blue-500",disabled:S||0===x.length||j,children:[(0,l.jsx)("option",{value:"",children:"Select a type"}),x.map(e=>(0,l.jsx)("option",{value:e.codename,children:e.name},e.codename))]}),(0,l.jsx)("div",{className:"pointer-events-none absolute top-8 right-0 flex items-center px-2 text-gray-700",children:(0,l.jsx)("svg",{className:"h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})}),S&&(0,l.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Loading types..."}),!S&&0===x.length&&(0,l.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"No file types available"})]}),(0,l.jsxs)("div",{className:"relative ",children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1 text-black",htmlFor:"languageSelect",children:"Languages"}),(0,l.jsx)("select",{id:"languageSelect",value:g,onChange:e=>v(e.target.value),className:"block w-full bg-white appearance-none border border-gray-300 text-black p-2 rounded leading-tight focus:outline-none focus:border-blue-500",children:h.map(e=>(0,l.jsx)("option",{value:e.codename,children:e.name},e.codename))}),(0,l.jsx)("div",{className:"pointer-events-none absolute top-8 right-0 flex items-center px-2 text-gray-700",children:(0,l.jsx)("svg",{className:"h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})}),R&&(0,l.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Loading languages..."}),!R&&0===h.length&&(0,l.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"No language available"})]})]}),w&&(0,l.jsxs)("div",{className:"flex items-center p-3 bg-red-50 border border-red-200 rounded text-red-800",role:"alert",children:[(0,l.jsx)(n.A,{size:20,className:"text-red-500 mr-2"}),(0,l.jsx)("p",{className:"text-sm",children:w})]}),(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsx)("button",{onClick:U,className:"px-4 py-2 bg-orange-500 text-white rounded transition-colors hover:bg-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",disabled:j||!e||!u,type:"button",children:j?"Uploading...":"Upload File"}),(0,l.jsx)(o.N,{environment:s,systemType:u,disabled:!s||!u}),(0,l.jsx)("button",{onClick:E,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded hover:bg-gray-50",disabled:j,type:"button",children:"Reset"})]})]}),y&&(0,l.jsxs)("div",{className:"mt-8 border-t pt-6",children:[(0,l.jsxs)("div",{className:"flex items-center mb-4",children:[(0,l.jsx)(d.A,{size:24,className:"text-green-500 mr-2"}),(0,l.jsx)("h3",{className:"text-xl font-semibold text-black",children:"Upload Complete"})]}),(0,l.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded mb-4 text-black",children:[(0,l.jsx)("p",{children:y.message}),(0,l.jsxs)("div",{className:"flex space-x-8 mt-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"Processed:"}),(0,l.jsxs)("span",{className:`ml-2 font-semibold ${y.processedCount<=0?"text-orange-600":"text-green-600"}`,children:[y.processedCount," records"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"Unprocessed:"}),(0,l.jsxs)("span",{className:`ml-2 font-semibold ${y.unprocessedCount>0?"text-orange-600":"text-green-600"}`,children:[y.unprocessedCount," records"]})]})]})]}),y.unprocessedCount>0&&y.unprocessedRecords&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-medium mb-2",children:"Unprocessed Records:"}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full border border-gray-200 rounded",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Name"}),(0,l.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Reason"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-gray-200",children:y.unprocessedRecords.map((e,t)=>(0,l.jsxs)("tr",{className:"bg-white",children:[(0,l.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.name}),(0,l.jsx)("td",{className:"px-4 py-2 text-sm text-red-600",children:e.reason})]},t))})]})})]}),(0,l.jsx)("div",{className:"flex justify-between mt-6",children:(0,l.jsx)("button",{onClick:E,className:"px-4 py-2 bg-blue-50 text-blue-600 border border-blue-200 rounded hover:bg-blue-100 transition-colors",type:"button",children:"Upload Another File"})})]})]})}}};